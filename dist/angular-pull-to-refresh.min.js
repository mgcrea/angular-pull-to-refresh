/**
 * angular-pull-to-refresh
 * @version v0.3.0 - 2015-11-26
 * @link https://github.com/mgcrea/angular-pull-to-refresh
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b,c){"use strict";angular.module("mgcrea.pullToRefresh",[]).constant("pullToRefreshConfig",{treshold:60,debounce:400,text:{pull:"pull to refresh",release:"release to refresh",loading:"refreshing..."},icon:{pull:"fa fa-arrow-down",release:"fa fa-arrow-up",loading:"fa fa-refresh fa-spin"}}).directive("pullToRefresh",["$compile","$timeout","$q","pullToRefreshConfig","$injector",function(b,c,d,e,f){return{scope:!0,restrict:"A",transclude:!0,templateUrl:"angular-pull-to-refresh.tpl.html",compile:function(b,g,h){return function(b,g,h){function i(a){if(t)return{};var b="translateY("+a+"px)";return{"-webkit-transform":b,transform:b}}function j(a){var b=a;return b.originalEvent&&(b=b.originalEvent),b.touches[0]}var k=b.$eval(h.pullToRefreshConfig),l=angular.extend({},e,k,h),m=g.parent(),n=a.ptr=g.children()[0];b.text=l.text,b.icon=l.icon,b.status="pull";var o=function(a){var c="PULL2REF.",d={pull:a(c+"PULL"),release:a(c+"RELEASE"),loading:a(c+"LOADING")};"string"==typeof d.pull&&(b.text=d);var e=function(a){d[a].then&&d[a].then(function(c){b.text[a]=c})};e("pull"),e("release"),e("loading"),"string"==typeof d.pull&&(b.text=d)};try{o(f.get("$translate"))}catch(p){}var q,r=function(a){s="release"===a,b.$apply(function(){b.status=a})},s=!1,t=!0;g.bind("touchstart",function(a){q=j(a).pageY}),g.bind("touchmove",function(a){var b=m[0].scrollTop,c=j(a).pageY;0===b&&(t=!1,b=q-c),g.css(i(c-q)),b<-l.treshold&&!s?r("release"):b>-l.treshold&&s&&r("pull")}),g.bind("touchend",function(a){if(s){g.css(i(0)),n.style.webkitTransitionDuration=0,n.style.margin="0 auto",r("loading");var e=+new Date;d.when(b.$eval(h.pullToRefresh)).then(function(){var a=+new Date-e;c(function(){n.style.margin="",n.style.webkitTransitionDuration="",b.status="pull"},a<l.debounce?l.debounce-a:0)})}}),b.$on("$destroy",function(){g.unbind("touchmove"),g.unbind("touchend")})}}}}]),angular.module("mgcrea.pullToRefresh").run(["$templateCache",function(a){a.put("angular-pull-to-refresh.tpl.html",'<div class="pull-to-refresh">\n  <i ng-class="icon[status]"></i>&nbsp;\n  <span ng-bind="text[status]"></span>\n</div>\n<div ng-transclude></div>\n')}])}(window,document);